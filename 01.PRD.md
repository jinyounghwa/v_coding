## 개발을 시작하기 전에

- 무엇을 개발할 지 chatGPT로 많은 의견을 나누어서 정리하는것이 좋다.
- 개발 스펙을 나열하는 GPT의 함정에 빠지지 말고 계속 내용을 세분화 하는것이 먼저다.
- 정확하게 플로우를 정리하자
- 사용자에게 어떤 내용을 보여줄지 명확하게 분석하자 (예시 보여주기)
- 결과물이 어떻게 나와야 하는지 명확하게 알려줘야 한다.
- 관리자 페이지가 존재할 경우 어떤 내용인지 정리해야 한다.

## PRD 생성하기

- Cursor 사용자의 경우 PRD를 GPT에게 요청한다.
- 그대로 복사해서 마크다운 파일로 만든다.
- 문서 내용을 모두 사용하지 말자. 절대로 GPT의 함정에 빠지면 안된다.
- Windsurf 사용자의 경우 Plan Mode를 사용한다. PRD보다 더 좋다.
- 문서를 최대한 명확하게 정리하고 프론트/백엔드 파일을 분리한다.
- 문서의 길이가 300라인을 넘지 않도록 한다. 넘으면 반드시 분리해서 요청한다.
- 대부분 500라인이라고 하지만 경험상 300라인 이내가 AI가 한번에 이해할 정도의 분량이다.

## PRD 샘플

✅ 티켓 예매 시스템 작업 목록 (기능별 구조화 + 취소/환불 포함)
ID 기능 작업 항목 우선순위 비고
📦 공통 기능
C-01 데이터 모델 ERD 설계 및 Prisma 모델링 🔴 좌석, 회원/비회원, 환불 로직 반영
C-02 API 명세 Swagger 기반 REST API 문서 🔴 전체 엔드포인트 기준
C-03 Role 관리 사용자/관리자 권한 구분 🔴 관리자 페이지 접근 제어용
C-04 공통 에러처리 일관된 에러 메시지 구조 🟡 클라이언트 UX 개선용
C-05 상태코드 정의 예매 상태: reserved/cancelled/refunded 등 🔴 예매/취소/환불 상태 관리 기준

| 👤 사용자 페이지 ||||
| U-01 | 회원가입/로그인 | 회원 인증 (JWT) 처리 | 🔴 | |
| U-02 | 비회원 인증 | 이메일 인증 + guestToken 발급 | 🔴 | |
| U-03 | 공연 목록 조회 | 전체 공연 리스트 | 🔴 | |
| U-04 | 공연 상세 조회 | 공연 정보 + 좌석 현황 표시 | 🔴 | |
| U-05 | 좌석 선택 예매 | 좌석 중복 방지 + 예매 API 연동 | 🔴 | |
| U-06 | 예매 내역 조회 | 내 티켓 확인 (회원/비회원) | 🟡 | guestToken 인증 포함 |
| U-07 | 예매 취소 요청 | 예매 상태 cancelled로 변경 | 🔴 | 공연 시작 전까지만 가능 |
| U-08 | 환불 요청 | 취소 티켓에 대해 환불 처리 요청 | 🟡 | 환불 여부 및 시점 관리 필요 |

| 🛠️ 관리자 페이지 ||||
| A-01 | 공연 등록 | 공연 생성 폼 + API 연동 | 🔴 | |
| A-02 | 공연 수정/삭제 | 공연 내용 변경 및 제거 | 🟡 | |
| A-03 | 예매 통계 보기 | 공연별 예매/취소/환불 통계 | 🔴 | 일간/누적 통계 등 |
| A-04 | 전체 예매 내역 조회 | 관리자용 전체 티켓 리스트 | 🟡 | 필터, 정렬 등 포함 |
| A-05 | 환불 관리 | 환불 승인/거절 처리 | 🟡 | 자동/수동 환불 여부 반영 |

| ⚙️ 백엔드 및 인프라 ||||
| B-01 | 프로젝트 초기화 | Nest.js + 모듈 구조 설계 | 🔴 | auth, event, ticket, refund 등 |
| B-02 | Prisma/DB 설정 | PostgreSQL + Prisma 연동 | 🔴 | 마이그레이션 스크립트 포함 |
| B-03 | 인증 모듈 | 회원/비회원 인증 처리 | 🔴 | 이메일 인증 포함 |
| B-04 | 예매 처리 | 좌석 확인, 예매 생성 로직 | 🔴 | 트랜잭션 처리 |
| B-05 | 예매 취소 | 티켓 상태 변경 및 조건 검사 | 🔴 | 공연 시작 전 여부 확인 포함 |
| B-06 | 환불 처리 | 환불 요청 → 환불 상태 관리 | 🔴 | 관리자 승인 or 자동화 선택 가능 |
| B-07 | 관리자 API | 공연/티켓/통계 관리 API | 🟡 | Role guard 적용 |
| B-08 | docker-compose 구성 | 백 + 프론트 + DB 통합 실행 | 🟡 | 개발 편의성 |
| B-09 | 테스트 작성 | 예매/취소/환불 등 단위 테스트 | ⚪ | 추후 적용 가능 |

📌 비고 설명 요약
cancelled: 사용자가 예매를 취소했지만, 환불은 아직 안 된 상태

refunded: 환불까지 완료된 상태

환불 요청은 사용자 또는 관리자 처리로 분리 가능 (자동/수동 환불 선택 설계 가능)
